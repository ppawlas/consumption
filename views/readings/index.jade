extends ../layout

block content
	h1= title

	- if (links) {
	- links.forEach(function(link) {
		p
			a(href=link.href)= link.name
	-	});
	-	}

	include import

	p
		a(href=controllerPath + 'new') New entry

	table
			thead
				tr
					- labels.actuals.forEach(function(label) {
						th= label
					-	});
					- labels.virtuals.forEach(function(label) {
						th= label
					-	});					
			tbody
			- readings.forEach(function(reading) {
				tr
					- labels.actuals.forEach(function(label) {
						- var actual = reading[label.toLowerCase()];
						td= actual && typeof actual === "object" ? actual.toLocaleDateString() : parseFloat(Math.round(actual * 100) / 100).toFixed(2)
					-	});						
					- for(var virtual in reading.virtuals.toObject()) {
						td= parseFloat(Math.round(reading.virtuals[virtual] * 100) / 100).toFixed(2)
					- }
					td
						form(action=controllerPath + encodeURIComponent(reading._id), method='GET')
							input(type='submit', value='Edit')									
					td
						form(action=controllerPath + encodeURIComponent(reading._id), method='POST')
							input(name='_method', type='hidden', value='DELETE')
							input(type='submit', value='Delete')					
			- });		

	- if (page > 0) {
		a(href='?page=' + (page - 1)) Previous
		&nbsp;
	-	}

	- if (! lastPage) {
		a(href='?page=' + (page + 1)) Next
	-	}	